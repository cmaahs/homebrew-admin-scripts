#!/usr/bin/env bash

DIRECTION=${1}


modify=1
if [[ "${DIRECTION}" == "next" ]]; then
    modify=1
fi
if [[ "${DIRECTION}" == "prev" ]]; then
    modify=-1
fi
NUM=$(cat ~/.oots)
NUM=$(( $NUM + $modify ))
if [[ ${DIRECTION} == "n" ]]; then
    modify=0
    NUM=${2}
fi

FILE_COUNT=$(ls -1 ~/oots/test/${NUM}*.md | wc -l | awk '{ print $1 }')
if [[ "${FILE_COUNT}" == "1" ]]; then
    FILES=$(ls -1 ~/oots/test/${NUM}*.md)
    # MDNAME=$(echo ${FILES} | sed 's/ /\&#32;/g' | sed "s/'/\\'/g")
    # MDNAME=${FILES}
    # echo -e "# oots ${NUM}\n\n![Strip](${MDNAME})" > ~/tmp/strip.md
    # mdcat ~/tmp/strip.md
    cat ${FILES} | mdcat
else
    FILES=$(find ~/oots/detox/ -name "${NUM}\ -*.gif")
    for i in ${FILES}; do
        echo "Read This one: ${i}"
    done
fi

if [[ "${modify}" != "0" ]]; then
    echo ${NUM} > ~/.oots
fi
